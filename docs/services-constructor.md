# –ü–õ–ê–ù: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ¬´–°–µ—Ä–≤–∏—Å—ã¬ª

> **–°—Ç–∞—Ç—É—Å:** ÔøΩ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Phase 3 - Frontend)  
> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-02-04  
> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-04  
> **–¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞:** MOBILE + WEB (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ VedicAI)  
> **–ê–≥–µ–Ω—Ç:** project-planner ‚Üí mobile-developer, backend-specialist

---

## ÔøΩ Progress Tracker

| Phase | Status | Progress |
|-------|--------|----------|
| Phase 1: Models | ‚úÖ Done | 100% |
| Phase 2: Backend API | ‚úÖ Done | 100% |
| Phase 3: Frontend Core | üöß In Progress | 80% |
| Phase 4: Provider Flow | ‚è≥ Pending | 0% |
| Phase 5: Integration | ‚è≥ Pending | 0% |

---

## ÔøΩüìå Overview

¬´–°–µ—Ä–≤–∏—Å—ã¬ª ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–Ω–ª–∞–π–Ω- –∏ –æ—Ñ–ª–∞–π–Ω-—É—Å–ª—É–≥–∞–º–∏. –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –ª—é–±—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–∞—Å—Ç—Ä–æ–ª–æ–≥, –ø—Å–∏—Ö–æ–ª–æ–≥, –∫–æ—É—á, –¥—É—Ö–æ–≤–Ω—ã–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä —è–≥–∏–π, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å) –º–æ–≥—É—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å –±–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### –ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø
> **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å VedicAI
- –ù–æ–≤—ã–π —Ç–∞–± ¬´–°–µ—Ä–≤–∏—Å—ã¬ª –≤ –ø–æ—Ä—Ç–∞–ª–µ (`PortalMainScreen.tsx`)
- –û–±—â–∞—è –±–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–º–æ–¥–µ–ª—å `User`)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏: —á–∞—Ç–∞–º–∏, –∫–∞—Ä—Ç–∞–º–∏, S3, push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞ **–õ–∞–∫—à–º–∏** (–∫–æ—à–µ–ª—ë–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

---

## ‚úÖ Success Criteria

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –ú–µ—Ç—Ä–∏–∫–∞ |
|---|----------|---------|
| 1 | –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å | < 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ UI |
| 2 | –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∏ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è | < 3 –∫–ª–∏–∫–∞ –¥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| 3 | –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç | –°–ª–æ—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏—Å–∫–ª—é—á–µ–Ω—ã |
| 4 | –ö–æ—à–µ–ª—ë–∫ –õ–∞–∫—à–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–∞–ª–∞–Ω—Å | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è |
| 5 | Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø–∏—Å–∏ | –ü—Ä–∏—Ö–æ–¥—è—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É –∏ –∫–ª–∏–µ–Ω—Ç—É |
| 6 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ—Ä—Ç–∞–ª–æ–º | –¢–∞–± "–°–µ—Ä–≤–∏—Å—ã" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–µ—Ç–∫–µ |

---

## üõ† Tech Stack

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-----------|------------|-------------|
| **Backend** | Go + Fiber | –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å—Ç–µ–∫ VedicAI |
| **Database** | PostgreSQL + GORM | –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ, –º–∏–≥—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ |
| **Mobile** | React Native 0.76.5 | –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π frontend |
| **Storage** | S3 (FirstVDS) | –ú–µ–¥–∏–∞ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ |
| **Notifications** | FCM/Expo Push | –£–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ |
| **Real-time** | WebSocket Hub | –î–ª—è instant updates |
| **Calendar** | Custom (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) | MVP, –ø–æ–∑–∂–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google/Apple |

---

## üìÇ File Structure

### Backend (Go)

```
server/internal/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ service.go              # NEW: Service, ServiceFormat, ServiceSchedule
‚îÇ   ‚îú‚îÄ‚îÄ service_booking.go      # NEW: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ service_tariff.go       # NEW: –¢–∞—Ä–∏—Ñ—ã
‚îÇ   ‚îú‚îÄ‚îÄ wallet.go               # NEW: –ö–æ—à–µ–ª—ë–∫ –õ–∞–∫—à–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ wallet_transaction.go   # NEW: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ service_handler.go      # NEW: CRUD —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ booking_handler.go      # NEW: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ calendar_handler.go     # NEW: –ö–∞–ª–µ–Ω–¥–∞—Ä—å/—Å–ª–æ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ wallet_handler.go       # NEW: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ—à–µ–ª—å–∫–æ–º
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ service_service.go      # NEW: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ booking_service.go      # NEW: –õ–æ–≥–∏–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ calendar_service.go     # NEW: –†–∞—Å—á—ë—Ç —Å–ª–æ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ wallet_service.go       # NEW: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –õ–∞–∫—à–º–∏
‚îî‚îÄ‚îÄ database/
    ‚îî‚îÄ‚îÄ seed.go                 # UPDATE: Seed –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å–µ—Ä–≤–∏—Å–æ–≤
```

### Frontend (React Native)

```
frontend/
‚îú‚îÄ‚îÄ screens/portal/
‚îÇ   ‚îî‚îÄ‚îÄ services/               # NEW FOLDER
‚îÇ       ‚îú‚îÄ‚îÄ index.ts
‚îÇ       ‚îú‚îÄ‚îÄ ServicesHomeScreen.tsx       # –ì–ª–∞–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ ServiceDetailScreen.tsx      # –î–µ—Ç–∞–ª–∏ —Å–µ—Ä–≤–∏—Å–∞
‚îÇ       ‚îú‚îÄ‚îÄ ServiceBookingScreen.tsx     # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ CreateServiceScreen.tsx      # –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ MyServicesScreen.tsx         # –ú–æ–∏ —Å–µ—Ä–≤–∏—Å—ã (–¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞)
‚îÇ       ‚îú‚îÄ‚îÄ MyBookingsScreen.tsx         # –ú–æ–∏ –∑–∞–ø–∏—Å–∏ (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞)
‚îÇ       ‚îî‚îÄ‚îÄ components/
‚îÇ           ‚îú‚îÄ‚îÄ ServiceCard.tsx
‚îÇ           ‚îú‚îÄ‚îÄ ServiceCalendar.tsx
‚îÇ           ‚îú‚îÄ‚îÄ TariffSelector.tsx
‚îÇ           ‚îú‚îÄ‚îÄ FormatBadge.tsx
‚îÇ           ‚îî‚îÄ‚îÄ BookingConfirmation.tsx
‚îú‚îÄ‚îÄ screens/wallet/             # NEW FOLDER
‚îÇ   ‚îú‚îÄ‚îÄ WalletScreen.tsx               # –ë–∞–ª–∞–Ω—Å –õ–∞–∫—à–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ TransactionHistoryScreen.tsx   # –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ serviceService.ts       # NEW: API –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ bookingService.ts       # NEW: API –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ walletService.ts        # NEW: API –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞
‚îî‚îÄ‚îÄ context/
    ‚îî‚îÄ‚îÄ WalletContext.tsx       # NEW: –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ—à–µ–ª—å–∫–∞
```

### –û–±–Ω–æ–≤–ª—è–µ–º—ã–µ —Ñ–∞–π–ª—ã

```
frontend/screens/portal/PortalMainScreen.tsx  # UPDATE: –¥–æ–±–∞–≤–∏—Ç—å —Ç–∞–± 'services'
server/cmd/api/main.go                         # UPDATE: –Ω–æ–≤—ã–µ —Ä–æ—É—Ç—ã
server/internal/database/database.go           # UPDATE: AutoMigrate –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
```

---

## üìä Database Schema

### Core Tables

```sql
-- –°–µ—Ä–≤–∏—Å (—É—Å–ª—É–≥–∞)
CREATE TABLE services (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    deleted_at TIMESTAMP,
    
    -- –í–ª–∞–¥–µ–ª–µ—Ü (—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç)
    owner_id INTEGER NOT NULL REFERENCES users(id),
    
    -- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    title VARCHAR(200) NOT NULL,
    description TEXT,
    cover_image_url VARCHAR(500),
    category VARCHAR(50),         -- 'astrology', 'psychology', 'coaching', etc.
    language VARCHAR(10) DEFAULT 'ru',
    
    -- –§–æ—Ä–º–∞—Ç (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –∫–∞–∫ JSON)
    formats TEXT,                 -- ["individual", "group", "subscription"]
    
    -- –í—Ä–µ–º—è –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
    schedule_type VARCHAR(30),    -- 'booking', 'fixed', 'live', 'anytime'
    
    -- –ö–∞–Ω–∞–ª –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
    channel VARCHAR(30),          -- 'video', 'zoom', 'youtube', 'telegram', 'offline', 'file'
    channel_link VARCHAR(500),    -- Zoom ID, Telegram link, etc.
    offline_address VARCHAR(500),
    offline_lat DECIMAL(10,8),
    offline_lng DECIMAL(11,8),
    
    -- –î–æ—Å—Ç—É–ø
    access_type VARCHAR(20),      -- 'free', 'paid', 'subscription', 'invite'
    
    -- –°—Ç–∞—Ç—É—Å
    status VARCHAR(20) DEFAULT 'draft',  -- 'draft', 'active', 'paused', 'archived'
    
    -- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    views_count INTEGER DEFAULT 0,
    bookings_count INTEGER DEFAULT 0,
    rating DECIMAL(2,1) DEFAULT 0,
    reviews_count INTEGER DEFAULT 0,
    
    -- –°–≤—è–∑—å —Å —á–∞—Ç–æ–º
    chat_room_id INTEGER REFERENCES rooms(id)
);

-- –¢–∞—Ä–∏—Ñ—ã
CREATE TABLE service_tariffs (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    deleted_at TIMESTAMP,
    
    service_id INTEGER NOT NULL REFERENCES services(id),
    
    name VARCHAR(100) NOT NULL,
    price INTEGER NOT NULL,           -- –í –õ–∞–∫—à–º–∏ (–∏–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞)
    currency VARCHAR(10) DEFAULT 'LKS',  -- LKS = –õ–∞–∫—à–º–∏
    
    duration_minutes INTEGER,         -- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
    sessions_count INTEGER DEFAULT 1, -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π
    validity_days INTEGER,            -- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫)
    
    includes TEXT,                    -- JSON: —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ
    is_default BOOLEAN DEFAULT false,
    is_active BOOLEAN DEFAULT true,
    
    sort_order INTEGER DEFAULT 0
);

-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (—Å–ª–æ—Ç—ã)
CREATE TABLE service_schedules (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    deleted_at TIMESTAMP,
    
    service_id INTEGER NOT NULL REFERENCES services(id),
    
    -- –î–ª—è type='weekly': –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ + –≤—Ä–µ–º—è
    day_of_week INTEGER,              -- 0=Sun, 1=Mon, ...
    time_start TIME,
    time_end TIME,
    
    -- –î–ª—è type='specific': –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞—Ç—ã
    specific_date DATE,
    
    -- –î–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö: –ª–∏–º–∏—Ç
    max_participants INTEGER DEFAULT 1,
    
    is_active BOOLEAN DEFAULT true
);

-- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
CREATE TABLE service_bookings (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    deleted_at TIMESTAMP,
    
    service_id INTEGER NOT NULL REFERENCES services(id),
    tariff_id INTEGER NOT NULL REFERENCES service_tariffs(id),
    client_id INTEGER NOT NULL REFERENCES users(id),
    
    -- –í—Ä–µ–º—è
    scheduled_at TIMESTAMP NOT NULL,
    duration_minutes INTEGER NOT NULL,
    
    -- –°—Ç–∞—Ç—É—Å
    status VARCHAR(20) DEFAULT 'pending',  -- 'pending', 'confirmed', 'cancelled', 'completed', 'no_show'
    
    -- –°–≤—è–∑—å —Å –æ–ø–ª–∞—Ç–æ–π (–ø–æ–∫–∞ –∏–≥—Ä–æ–≤–∞—è)
    transaction_id INTEGER REFERENCES wallet_transactions(id),
    price_paid INTEGER DEFAULT 0,
    
    -- –ó–∞–º–µ—Ç–∫–∏
    client_note TEXT,
    provider_note TEXT,
    
    -- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
    reminder_sent BOOLEAN DEFAULT false,
    reminder_24h_sent BOOLEAN DEFAULT false
);

-- –ö–æ—à–µ–ª—ë–∫ –õ–∞–∫—à–º–∏
CREATE TABLE wallets (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    user_id INTEGER NOT NULL UNIQUE REFERENCES users(id),
    
    balance INTEGER DEFAULT 1000,     -- –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    
    total_earned INTEGER DEFAULT 0,   -- –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ
    total_spent INTEGER DEFAULT 0     -- –í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ
);

-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
CREATE TABLE wallet_transactions (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP,
    
    wallet_id INTEGER NOT NULL REFERENCES wallets(id),
    
    type VARCHAR(20) NOT NULL,        -- 'credit', 'debit', 'bonus', 'refund'
    amount INTEGER NOT NULL,
    
    description VARCHAR(500),
    
    -- –°–≤—è–∑—å —Å booking (–µ—Å–ª–∏ –µ—Å—Ç—å)
    booking_id INTEGER REFERENCES service_bookings(id),
    
    -- –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º –∫–æ—à–µ–ª—å–∫–æ–º (–¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤)
    related_wallet_id INTEGER REFERENCES wallets(id),
    
    balance_after INTEGER NOT NULL
);
```

---

## üìã Task Breakdown

### PHASE 1: Database & Models (Backend)

| ID | Task | Agent | Skills | Priority | Deps | Verify |
|----|------|-------|--------|----------|------|--------|
| 1.1 | ‚úÖ –°–æ–∑–¥–∞—Ç—å `models/service.go` | backend-specialist | database-design | P0 | - | `go build` success |
| 1.2 | ‚úÖ –°–æ–∑–¥–∞—Ç—å `models/service_tariff.go` | backend-specialist | database-design | P0 | 1.1 | FK constraints work |
| 1.3 | ‚úÖ –°–æ–∑–¥–∞—Ç—å `models/service_schedule.go` | backend-specialist | database-design | P0 | 1.1 | FK constraints work |
| 1.4 | ‚úÖ –°–æ–∑–¥–∞—Ç—å `models/service_booking.go` | backend-specialist | database-design | P0 | 1.2 | FK constraints work |
| 1.5 | ‚úÖ –°–æ–∑–¥–∞—Ç—å `models/wallet.go` + `wallet_transaction.go` | backend-specialist | database-design | P0 | - | `go build` success |
| 1.6 | ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `database.go` AutoMigrate | backend-specialist | - | P0 | 1.1-1.5 | Migrate runs |
| 1.7 | ‚úÖ Seed –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ Wallet | backend-specialist | - | P1 | 1.6 | Seed data inserted |

**INPUT:** –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ö–µ–º—ã –≤—ã—à–µ  
**OUTPUT:** ‚úÖ –ú–æ–¥–µ–ª–∏ GORM, –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã  
**VERIFY:** ‚úÖ `go run cmd/api/main.go` ‚Üí —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ PostgreSQL

---

### PHASE 2: Backend Services & Handlers

| ID | Task | Agent | Skills | Priority | Deps | Verify |
|----|------|-------|--------|----------|------|--------|
| 2.1 | ‚úÖ `services/wallet_service.go` | backend-specialist | api-patterns | P0 | 1.5 | Unit tests pass |
| 2.2 | ‚úÖ `handlers/wallet_handler.go` (GET balance, POST transfer) | backend-specialist | api-patterns | P0 | 2.1 | API returns 200 |
| 2.3 | ‚úÖ `services/service_service.go` (CRUD) | backend-specialist | api-patterns | P0 | 1.1 | Unit tests pass |
| 2.4 | ‚úÖ `handlers/service_handler.go` | backend-specialist | api-patterns | P0 | 2.3 | API returns 200 |
| 2.5 | ‚úÖ `services/calendar_service.go` (—Å–ª–æ—Ç—ã, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã) | backend-specialist | api-patterns | P0 | 1.3 | Slot calculation works |
| 2.6 | ‚úÖ `handlers/calendar_handler.go` | backend-specialist | api-patterns | P0 | 2.5 | GET /slots returns array |
| 2.7 | ‚úÖ `services/booking_service.go` | backend-specialist | api-patterns | P0 | 2.1, 2.5 | Booking created with wallet debit |
| 2.8 | ‚úÖ `handlers/booking_handler.go` | backend-specialist | api-patterns | P0 | 2.7 | POST /book works |
| 2.9 | ‚úÖ –†–æ—É—Ç—ã –≤ `main.go` | backend-specialist | api-patterns | P0 | 2.2-2.8 | All routes mounted |

**INPUT:** –ú–æ–¥–µ–ª–∏ –∏–∑ Phase 1  
**OUTPUT:** ‚úÖ REST API –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π, –∫–æ—à–µ–ª—å–∫–∞  
**VERIFY:** ‚úÖ `curl localhost:8081/api/services` ‚Üí 200 OK

### API Endpoints Summary

```
# Wallet
GET    /api/wallet              # –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET    /api/wallet/transactions # –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
POST   /api/wallet/transfer     # –ü–µ—Ä–µ–≤–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É (–ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏)

# Services
GET    /api/services            # –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
GET    /api/services/:id        # –î–µ—Ç–∞–ª–∏ —Å–µ—Ä–≤–∏—Å–∞
POST   /api/services            # –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å (–¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞)
PUT    /api/services/:id        # –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
DELETE /api/services/:id        # –£–¥–∞–ª–∏—Ç—å (soft)
GET    /api/services/my         # –ú–æ–∏ —Å–µ—Ä–≤–∏—Å—ã (–∫–∞–∫ –≤–ª–∞–¥–µ–ª–µ—Ü)

# Tariffs
GET    /api/services/:id/tariffs
POST   /api/services/:id/tariffs
PUT    /api/tariffs/:id
DELETE /api/tariffs/:id

# Calendar/Schedule
GET    /api/services/:id/schedule      # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
POST   /api/services/:id/schedule      # –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ—Ç
DELETE /api/schedule/:id               # –£–¥–∞–ª–∏—Ç—å —Å–ª–æ—Ç
GET    /api/services/:id/slots         # –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ (—Å –¥–∞—Ç–æ–π)

# Bookings
POST   /api/services/:id/book          # –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
GET    /api/bookings/my                # –ú–æ–∏ –∑–∞–ø–∏—Å–∏ (–∫–∞–∫ –∫–ª–∏–µ–Ω—Ç)
GET    /api/bookings/incoming          # –í—Ö–æ–¥—è—â–∏–µ –∑–∞–ø–∏—Å–∏ (–∫–∞–∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç)
PUT    /api/bookings/:id/confirm       # –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
PUT    /api/bookings/:id/cancel        # –û—Ç–º–µ–Ω–∏—Ç—å
PUT    /api/bookings/:id/complete      # –ó–∞–≤–µ—Ä—à–∏—Ç—å
```

---

### PHASE 3: Frontend - Core Screens (Mobile)

| ID | Task | Agent | Skills | Priority | Deps | Verify |
|----|------|-------|--------|----------|------|--------|
| 3.1 | ‚úÖ `services/serviceService.ts` | mobile-developer | api-patterns | P0 | 2.9 | API calls work |
| 3.2 | ‚úÖ `services/walletService.ts` | mobile-developer | api-patterns | P0 | 2.9 | API calls work |
| 3.3 | ‚úÖ `context/WalletContext.tsx` | mobile-developer | - | P0 | 3.2 | Context provides balance |
| 3.4 | ‚úÖ `screens/wallet/WalletScreen.tsx` | mobile-developer | mobile-design | P1 | 3.3 | Balance visible |
| 3.5 | ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `PortalMainScreen.tsx` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ç–∞–± 'services' | mobile-developer | - | P0 | - | Tab clickable |
| 3.6 | ‚úÖ `screens/portal/services/ServicesHomeScreen.tsx` | mobile-developer | mobile-design | P0 | 3.1 | List renders |
| 3.7 | ‚úÖ `screens/portal/services/components/ServiceCard.tsx` | mobile-developer | mobile-design | P0 | - | UI component |
| 3.8 | ‚úÖ `screens/portal/services/ServiceDetailScreen.tsx` | mobile-developer | mobile-design | P0 | 3.6 | Details render |
| 3.9 | üî≤ `screens/portal/services/components/ServiceCalendar.tsx` | mobile-developer | mobile-design | P0 | - | Calendar UI |
| 3.10 | üî≤ `screens/portal/services/ServiceBookingScreen.tsx` | mobile-developer | mobile-design | P0 | 3.8, 3.9 | Can select slot + tariff |
| 3.11 | üî≤ Push notification on booking | mobile-developer | - | P1 | 3.10 | Notification arrives |

**INPUT:** Backend API (Phase 2)  
**OUTPUT:** üöß –†–∞–±–æ—Ç–∞—é—â–∏–µ —ç–∫—Ä–∞–Ω—ã –∑–∞–ø–∏—Å–∏  
**VERIFY:** –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí –ü–æ—Ä—Ç–∞–ª ‚Üí –°–µ—Ä–≤–∏—Å—ã ‚Üí –î–µ—Ç–∞–ª–∏ ‚Üí –ó–∞–ø–∏—Å–∞—Ç—å—Å—è

---

### PHASE 4: Frontend - Provider Flow (Mobile)

| ID | Task | Agent | Skills | Priority | Deps | Verify |
|----|------|-------|--------|----------|------|--------|
| 4.1 | `screens/portal/services/CreateServiceScreen.tsx` | mobile-developer | mobile-design | P0 | 3.1 | Service created |
| 4.2 | `screens/portal/services/components/FormatSelector.tsx` | mobile-developer | mobile-design | P0 | - | Multi-select works |
| 4.3 | `screens/portal/services/components/ScheduleEditor.tsx` | mobile-developer | mobile-design | P0 | - | Can add slots |
| 4.4 | `screens/portal/services/components/TariffEditor.tsx` | mobile-developer | mobile-design | P0 | - | Can add tariffs |
| 4.5 | `screens/portal/services/MyServicesScreen.tsx` | mobile-developer | mobile-design | P0 | 4.1 | List of owned services |
| 4.6 | `screens/portal/services/MyBookingsScreen.tsx` (incoming) | mobile-developer | mobile-design | P0 | 3.10 | Incoming bookings visible |
| 4.7 | Confirm/Cancel/Complete booking actions | mobile-developer | - | P0 | 4.6 | Status changes |

**INPUT:** CreateService API, Booking API  
**OUTPUT:** –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—è–º–∏  
**VERIFY:** –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Ä–≤–∏—Å ‚Üí –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è ‚Üí –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –≤–∏–¥–∏—Ç –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç

---

### PHASE 5: Integration & Polish

| ID | Task | Agent | Skills | Priority | Deps | Verify |
|----|------|-------|--------|----------|------|--------|
| 5.1 | Chat room auto-create –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ booking | backend-specialist | - | P1 | 4.7 | Room created |
| 5.2 | Push reminder –∑–∞ 24h –∏ –∑–∞ 1h | backend-specialist | - | P1 | 4.7 | Push arrives |
| 5.3 | Map integration ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å offline-—Å–µ—Ä–≤–∏—Å—ã –Ω–∞ –∫–∞—Ä—Ç–µ | mobile-developer | - | P2 | 3.6 | Markers visible |
| 5.4 | S3 upload –¥–ª—è cover_image_url | mobile-developer | - | P0 | 4.1 | Image uploads |
| 5.5 | Wallet initial seed –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (1000 –õ–∞–∫—à–º–∏) | backend-specialist | - | P0 | 2.1 | New user has wallet |
| 5.6 | Reviews & ratings | backend-specialist, mobile-developer | - | P2 | 4.7 | TBD |

---

## PHASE X: Verification Checklist

### Pre-Completion Checks

- [x] **Go Build:** `cd server && go build ./...`
- [ ] **Lint & TypeScript:** `cd frontend && npm run lint && npx tsc --noEmit`
- [ ] **Security Scan:** `python .agent/skills/vulnerability-scanner/scripts/security_scan.py .`
- [ ] **API Tests:** Manual testing of all endpoints via curl/Postman
- [ ] **E2E Flow:** Create service ‚Üí Book ‚Üí Confirm ‚Üí Complete

### Final Verification

- [x] –ü–æ—Ä—Ç–∞–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–± "–°–µ—Ä–≤–∏—Å—ã"
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- [ ] –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∏ –æ–ø–ª–∞—Ç–∏—Ç—å –õ–∞–∫—à–º–∏
- [ ] –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç push –∏ –≤–∏–¥–∏—Ç booking
- [ ] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ wallet_transactions
- [ ] –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è

---

## üöÄ Estimated Timeline

| Phase | Duration | Cumulative |
|-------|----------|------------|
| Phase 1: Models | ~1 –¥–µ–Ω—å | 1 –¥–µ–Ω—å |
| Phase 2: Backend API | ~2 –¥–Ω—è | 3 –¥–Ω—è |
| Phase 3: Core Screens | ~2 –¥–Ω—è | 5 –¥–Ω–µ–π |
| Phase 4: Provider Flow | ~2 –¥–Ω—è | 7 –¥–Ω–µ–π |
| Phase 5: Integration | ~1-2 –¥–Ω—è | 8-9 –¥–Ω–µ–π |
| Phase X: Testing | ~1 –¥–µ–Ω—å | 9-10 –¥–Ω–µ–π |

**Total MVP:** ~10 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π

---

## üìù Notes & Decisions

1. **–í–∞–ª—é—Ç–∞ –õ–∞–∫—à–º–∏** ‚Äî –∏–≥—Ä–æ–≤–∞—è –Ω–∞ —ç—Ç–∞–ø–µ MVP, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞—Ç—ë–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
2. **–†—É—á–Ω–æ–π –ø–µ—Ä–µ–≤–æ–¥** ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º –¥–ª—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–ª–∞—Ç—ã
3. **–ö–∞–ª–µ–Ω–¥–∞—Ä—å** ‚Äî —Å–≤–æ–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Google/Apple –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –±—É–¥—É—â–µ–µ
4. **–ë–µ–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞/–∑–∞–ø–∏—Å–µ–π** ‚Äî —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞—Ä—Ö–∏–≤–∞ –æ—Ç–ª–æ–∂–µ–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é
5. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:**
   - `astrology` ‚Äî –ê—Å—Ç—Ä–æ–ª–æ–≥–∏—è
   - `psychology` ‚Äî –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è
   - `coaching` ‚Äî –ö–æ—É—á–∏–Ω–≥
   - `spirituality` ‚Äî –î—É—Ö–æ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
   - `yagya` ‚Äî –Ø–≥—å–∏ –∏ —Ä–∏—Ç—É–∞–ª—ã
   - `education` ‚Äî –û–±—É—á–µ–Ω–∏–µ
   - `health` ‚Äî –ó–¥–æ—Ä–æ–≤—å–µ/–ê—é—Ä–≤–µ–¥–∞
   - `other` ‚Äî –î—Ä—É–≥–æ–µ

---

## üîó Dependencies

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|-----------|-------------|--------|
| Push Notifications | `PushToken` –≤ User | ‚úÖ –ï—Å—Ç—å |
| S3 Upload | `s3_service.go` | ‚úÖ –ï—Å—Ç—å |
| WebSocket | Hub –≤ `main.go` | ‚úÖ –ï—Å—Ç—å |
| Room (Chat) | `models/room.go` | ‚úÖ –ï—Å—Ç—å |
| –ö–∞—Ä—Ç—ã | MapGeoapify screen | ‚úÖ –ï—Å—Ç—å |

---

## ‚úÖ PLAN STATUS

**[OK] Plan created:** `services-constructor.md`

---

## Next Steps

1. üìñ Review this plan
2. üöÄ Run `/create` or ask me to start **Phase 1**
3. ‚úèÔ∏è Or modify plan manually if needed

---

*Generated by project-planner agent*
