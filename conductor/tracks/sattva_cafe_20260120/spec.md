# Спецификация: Сервис Кафе (Sattva Cafe)

## Обзор
Интеграция полноценного сервиса заказа еды и бронирования столиков в существующую платформу. Сервис включает в себя клиентский интерфейс в мобильном приложении (заказ в кафе, доставка, навынос) и интерфейс администратора кафе (управление заказами, расстановка столиков) также внутри мобильного приложения.

## Функциональные требования

### 1. Клиентский функционал (Mobile App)
- **Заказ по QR-коду:** Автоматическое открытие меню и привязка к столику при сканировании.
- **Типы заказов:** 
    - В заведении (за столиком).
    - Навынос (самовывоз).
    - Доставка (с проверкой зоны доставки).
- **Меню и Конструктор:**
    - Просмотр категорий блюд.
    - Кастомизация блюд (исключение ингредиентов, комментарии).
    - История заказов с возможностью быстрого повтора.
- **Оплата:** Только на месте (официанту или курьеру через терминал/наличными).
- **Взаимодействие:**
    - Вызов официанта с указанием причины (счет, помощь, убрать, дозаказ).
    - Live-статусы заказа через WebSocket (Принят, Готовится, Готов).
    - Push-уведомления о готовности или прибытии курьера.

### 2. Функционал Администратора (Mobile App - Admin Mode)
- **Прием заказов:** Управление очередью заказов в реальном времени.
- **Редактор зала:** Визуальный конструктор для настройки количества и расположения столиков в заведении.
- **Управление меню:** Возможность временно скрывать позиции (стоп-лист).

### 3. Геолокация и Карты
- Отображение кафе на общей карте приложения.
- Построение маршрутов до кафе внутри встроенного картографического сервиса.
- Валидация адресов доставки по гео-зонам.

## Технические требования
- **Backend:** Go (Fiber) для API, PostgreSQL для хранения заказов и конфигурации залов.
- **Real-time:** WebSockets для мгновенных уведомлений и обновления статусов.
- **Mobile:** React Native (интеграция в существующее приложение).
- **Гео:** Использование текущего сервиса карт (Geoapify интеграция).

## Критерии приемки
- Пользователь может сделать заказ, отсканировав QR-код.
- Администратор видит заказ и может изменить его статус.
- При изменении статуса пользователь мгновенно получает уведомление.
- Администратор может переместить "столик" в визуальном редакторе, и это сохранится в БД.

## Вне рамок (Out of Scope)
- Онлайн-оплата через шлюзы (Stripe, эквайринг) в рамках этой фазы.
- Интеграция с внешними сервисами доставки (Яндекс.Еда и т.д.).