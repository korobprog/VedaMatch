# Спецификация: Трек 5 - Санга: Звонки и Глобальные Связи

## 1. Обзор
Улучшение системы общения путем внедрения P2P аудио/видео вызовов и расширения профилей пользователей для подготовки к сервису совместного чтения писаний.

## 2. Функциональные требования

### 2.1 P2P Звонки (WebRTC)
- Реализация сигналинга через существующий WebSocket сервер (Go).
- Аудио и Видео звонки между пользователями (1-на-1).
- Кнопки вызова в окне чата и на новой вкладке "Звонки".
- История звонков (пропущенные, входящие, исходящие).
- Интеграция с **Firebase Push (FCM)** и **CallKeep** для отображения звонка на заблокированном экране.

### 2.2 Расширение Профиля и Контактов
- Добавление полей в профиль: **Ятра** (духовная община) и **Часовой пояс**.
- Интеграция полей в экран редактирования профиля.
- Улучшение экрана "Люди рядом": отображение расстояния (уже есть база) и фильтрация по Ятре.

### 2.3 Подготовка к "Совместному чтению"
- Логика определения "пересекающегося" времени для пользователей в разных часовых поясах.

## 3. Технический стек
- **Backend:** Go (Fiber, GORM), WebSocket (сигнализация), Firebase Admin SDK.
- **Mobile:** React Native, `react-native-webrtc`, `react-native-callkeep`, `@react-native-firebase/messaging`.

## 4. Критерии приемки
- Пользователь А может позвонить пользователю Б, когда приложение у Б закрыто (приходит Push-уведомление с экраном звонка).
- Высокое качество P2P соединения (минимальная задержка).
- В профиле можно выбрать свою Ятру и часовой пояс.
- На экране поиска можно отфильтровать преданных по конкретному городу или Ятре.
