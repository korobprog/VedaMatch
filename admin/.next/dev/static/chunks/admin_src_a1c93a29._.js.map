{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Rag-agent/admin/src/lib/api.ts"],"sourcesContent":["import axios from 'axios';\n\n// Функция для определения baseURL\nconst getBaseURL = (): string => {\n    // Если переменная окружения установлена, используем её\n    if (process.env.NEXT_PUBLIC_API_URL) {\n        return process.env.NEXT_PUBLIC_API_URL;\n    }\n\n    // Если мы в браузере, определяем URL на основе текущего домена\n    if (typeof window !== 'undefined') {\n        const hostname = window.location.hostname;\n        // Если это продакшн домен, используем API домен\n        if (hostname === 'vedamatch.ru' || hostname === 'www.vedamatch.ru') {\n            return 'https://api.vedamatch.ru/api';\n        }\n        // Для локальной разработки\n        if (hostname === 'localhost' || hostname === '127.0.0.1') {\n            return 'http://localhost:8081/api';\n        }\n        // Для других случаев (например, staging) можно использовать тот же домен\n        return `https://api.${hostname}/api`;\n    }\n\n    // Fallback для SSR\n    return 'http://localhost:8081/api';\n};\n\nconst api = axios.create({\n    baseURL: getBaseURL(),\n});\n\n// Add a request interceptor to add the auth headers if needed\napi.interceptors.request.use((config) => {\n    if (typeof window !== 'undefined') {\n        const adminData = localStorage.getItem('admin_data');\n        if (adminData) {\n            const parsed = JSON.parse(adminData);\n            // GORM returns ID with capital letters, so check both\n            const adminId = parsed.ID || parsed.id;\n            if (adminId) {\n                config.headers['X-Admin-ID'] = adminId;\n            }\n            if (parsed.token) {\n                config.headers['Authorization'] = `Bearer ${parsed.token}`;\n            }\n        }\n    }\n    return config;\n});\n\nexport default api;\n"],"names":[],"mappings":";;;;AAKQ;AALR;;AAEA,kCAAkC;AAClC,MAAM,aAAa;IACf,uDAAuD;IACvD,wCAAqC;QACjC;IACJ;;;AAmBJ;AAEA,MAAM,MAAM,+MAAK,CAAC,MAAM,CAAC;IACrB,SAAS;AACb;AAEA,8DAA8D;AAC9D,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC1B,wCAAmC;QAC/B,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACX,MAAM,SAAS,KAAK,KAAK,CAAC;YAC1B,sDAAsD;YACtD,MAAM,UAAU,OAAO,EAAE,IAAI,OAAO,EAAE;YACtC,IAAI,SAAS;gBACT,OAAO,OAAO,CAAC,aAAa,GAAG;YACnC;YACA,IAAI,OAAO,KAAK,EAAE;gBACd,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO,KAAK,EAAE;YAC9D;QACJ;IACJ;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["C:/Rag-agent/admin/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { Lock, Mail, Loader2, ShieldCheck } from 'lucide-react';\nimport api from '@/lib/api';\n\nexport default function LoginPage() {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const router = useRouter();\n\n    const handleLogin = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n\n        try {\n            const response = await api.post('/login', { email, password });\n            const { user, token } = response.data;\n\n            if (user.role === 'admin' || user.role === 'superadmin') {\n                localStorage.setItem('admin_data', JSON.stringify({ ...user, token }));\n                router.push('/dashboard');\n            } else {\n                setError('Access denied. Admin privileges required.');\n            }\n        } catch (err: any) {\n            setError(err.response?.data?.error || 'Login failed. Please check your credentials.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen flex items-center justify-center bg-[var(--background)] p-4\">\n            <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n                <div className=\"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-[var(--primary)]/10 rounded-full blur-[120px]\" />\n                <div className=\"absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] bg-[var(--primary)]/10 rounded-full blur-[120px]\" />\n            </div>\n\n            <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"w-full max-w-md\"\n            >\n                <div className=\"bg-[var(--card)] p-8 rounded-2xl border border-[var(--border)] shadow-2xl relative overflow-hidden\">\n                    <div className=\"flex justify-center mb-8\">\n                        <div className=\"p-4 bg-[var(--primary)]/10 rounded-2xl\">\n                            <ShieldCheck className=\"w-12 h-12 text-[var(--primary)]\" />\n                        </div>\n                    </div>\n\n                    <div className=\"text-center mb-8\">\n                        <h1 className=\"text-3xl font-bold tracking-tight mb-2\">Admin Portal</h1>\n                        <p className=\"text-[var(--muted-foreground)]\">Enter your credentials to manage the system</p>\n                    </div>\n\n                    {error && (\n                        <motion.div\n                            initial={{ opacity: 0, height: 0 }}\n                            animate={{ opacity: 1, height: 'auto' }}\n                            className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm\"\n                        >\n                            {error}\n                        </motion.div>\n                    )}\n\n                    <form onSubmit={handleLogin} className=\"space-y-6\">\n                        <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium ml-1\">Email Address</label>\n                            <div className=\"relative\">\n                                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--muted-foreground)]\" />\n                                <input\n                                    type=\"email\"\n                                    value={email}\n                                    onChange={(e) => setEmail(e.target.value)}\n                                    placeholder=\"admin@example.com\"\n                                    className=\"w-full bg-[var(--background)] border border-[var(--border)] rounded-xl py-3 pl-11 pr-4 focus:ring-2 focus:ring-[var(--primary)]/20 focus:border-[var(--primary)] transition-all outline-none\"\n                                    required\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium ml-1\">Password</label>\n                            <div className=\"relative\">\n                                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--muted-foreground)]\" />\n                                <input\n                                    type=\"password\"\n                                    value={password}\n                                    onChange={(e) => setPassword(e.target.value)}\n                                    placeholder=\"••••••••\"\n                                    className=\"w-full bg-[var(--background)] border border-[var(--border)] rounded-xl py-3 pl-11 pr-4 focus:ring-2 focus:ring-[var(--primary)]/20 focus:border-[var(--primary)] transition-all outline-none\"\n                                    required\n                                />\n                            </div>\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-[var(--primary)] hover:bg-[var(--primary)]/90 text-[var(--primary-foreground)] font-semibold py-3 rounded-xl transition-all h-12 flex items-center justify-center disabled:opacity-50\"\n                        >\n                            {loading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : 'Sign In'}\n                        </button>\n                    </form>\n                </div>\n            </motion.div>\n        </div>\n    );\n}\n"],"names":["useState","useRouter","motion","Lock","Mail","Loader2","ShieldCheck","api","LoginPage","email","setEmail","password","setPassword","loading","setLoading","error","setError","router","handleLogin","e","React","FormEvent","preventDefault","response","post","user","token","data","role","localStorage","setItem","JSON","stringify","push","err","opacity","y","height","target","value"],"mappings":";;;;;AAEA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,MAAM,QAAQ,eAAe;;;;AACtC,SAASC,IAAI,EAAEC,IAAI,EAAEC,OAAO,EAAEC,WAAW,QAAQ,cAAc;AAC/D,OAAOC,GAAG,MAAM,WAAW;;;AAN3B,YAAY;;;;;;AAQG;;IACX,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,OAAGV,8RAAQ,EAAC,EAAE,CAAC;IACtC,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,OAAGZ,8RAAQ,EAAC,EAAE,CAAC;IAC5C,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,OAAGd,8RAAQ,EAAC,KAAK,CAAC;IAC7C,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,OAAGhB,8RAAQ,EAAC,EAAE,CAAC;IACtC,MAAMiB,MAAM;IAEZ,MAAMC,WAAW,GAAG,MAAAA,CAAOC,CAAC,EAAEC,KAAK,CAACC,SAAS,KAAK;QAC9CF,CAAC,CAACG,cAAc,CAAC,CAAC;QAClBR,UAAU,CAAC,IAAI,CAAC;QAChBE,QAAQ,CAAC,EAAE,CAAC;QAEZ,IAAI;YACA,MAAMO,QAAQ,GAAG,MAAMhB,wIAAG,CAACiB,IAAI,CAAC,QAAQ,EAAE;gBAAEf,KAAK;gBAAEE;YAAS,CAAC,CAAC;YAC9D,MAAM,EAAEc,IAAI,EAAEC,KAAAA,EAAO,GAAGH,QAAQ,CAACI,IAAI;YAErC,IAAIF,IAAI,CAACG,IAAI,KAAK,OAAO,IAAIH,IAAI,CAACG,IAAI,KAAK,YAAY,EAAE;gBACrDC,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEC,IAAI,CAACC,SAAS,CAAC;oBAAE,GAAGP,IAAI;oBAAEC;gBAAM,CAAC,CAAC,CAAC;gBACtET,MAAM,CAACgB,IAAI,CAAC,YAAY,CAAC;YAC7B,CAAC,MAAM;gBACHjB,QAAQ,CAAC,2CAA2C,CAAC;YACzD;QACJ,CAAC,CAAC,OAAOkB,GAAG,EAAE,AAAK,GAAF;YACblB,QAAQ,CAACkB,GAAG,CAACX,QAAQ,EAAEI,IAAI,EAAEZ,KAAK,IAAI,8CAA8C,CAAC;QACzF,CAAC,QAAS;YACND,UAAU,CAAC,KAAK,CAAC;QACrB;IACJ,CAAC;IAED,qBACI,kTAAC,GAAG;QAAC,SAAS,EAAC,0EAA0E;;0BACrF,kTAAC,GAAG;gBAAC,SAAS,EAAC,sDAAsD;;kCACjE,kTAAC,GAAG;wBAAC,SAAS,EAAC,kGAAkG;;;;;;kCACjH,kTAAC,GAAG;wBAAC,SAAS,EAAC,sGAAsG;;;;;;;;;;;;0BAGzH,kTAAC,sTAAM,CAAC,GAAG;gBACP,OAAO,CAAC,CAAC;oBAAEqB,OAAO,EAAE,CAAC;oBAAEC,CAAC,EAAE;gBAAG,CAAC,CAAC;gBAC/B,OAAO,CAAC,CAAC;oBAAED,OAAO,EAAE,CAAC;oBAAEC,CAAC,EAAE;gBAAE,CAAC,CAAC;gBAC9B,SAAS,EAAC,iBAAiB;wCAE3B,kTAAC,GAAG;oBAAC,SAAS,EAAC,oGAAoG;;sCAC/G,kTAAC,GAAG;4BAAC,SAAS,EAAC,0BAA0B;sCACrC,gUAAC,GAAG;gCAAC,SAAS,EAAC,wCAAwC;0CACnD,gUAAC,8UAAW;oCAAC,SAAS,EAAC,iCAAiC;;;;;;;;;;;;;;;;sCAIhE,kTAAC,GAAG;4BAAC,SAAS,EAAC,kBAAkB;;8CAC7B,kTAAC,EAAE;oCAAC,SAAS,EAAC,wCAAwC;8CAAC,YAAY,EAAE,EAAE;;;;;;8CACvE,kTAAC,CAAC;oCAAC,SAAS,EAAC,gCAAgC;8CAAC,2CAA2C,EAAE,CAAC;;;;;;;;;;;;wBAG/FrB,KAAK,kBACF,kTAAC,sTAAM,CAAC,GAAG;4BACP,OAAO,CAAC,CAAC;gCAAEoB,OAAO,EAAE,CAAC;gCAAEE,MAAM,EAAE;4BAAE,CAAC,CAAC;4BACnC,OAAO,CAAC,CAAC;gCAAEF,OAAO,EAAE,CAAC;gCAAEE,MAAM,EAAE;4BAAO,CAAC,CAAC;4BACxC,SAAS,EAAC,mIAAmI;sCAE5ItB,KAAK;;;;;;sCAId,kTAAC,IAAI;4BAAC,QAAQ,CAAC,CAACG,WAAW,CAAC;4BAAC,SAAS,EAAC,WAAW;;8CAC9C,kTAAC,GAAG;oCAAC,SAAS,EAAC,WAAW;;sDACtB,kTAAC,KAAK;4CAAC,SAAS,EAAC,0BAA0B;sDAAC,aAAa,EAAE,KAAK;;;;;;sDAChE,kTAAC,GAAG;4CAAC,SAAS,EAAC,UAAU;;8DACrB,kTAAC,qTAAI;oDAAC,SAAS,EAAC,iFAAiF;;;;;;8DACjG,kTAAC,KAAK;oDACF,IAAI,EAAC,OAAO;oDACZ,KAAK,CAAC,CAACT,KAAK,CAAC;oDACb,QAAQ,CAAC,EAAEU,GAAC,GAAKT,QAAQ,CAACS,GAAC,CAACmB,MAAM,CAACC,KAAK,CAAC,CAAC;oDAC1C,WAAW,EAAC,mBAAmB;oDAC/B,SAAS,EAAC,8LAA8L;oDACxM,QAAQ;;;;;;;;;;;;;;;;;;8CAKpB,kTAAC,GAAG;oCAAC,SAAS,EAAC,WAAW;;sDACtB,kTAAC,KAAK;4CAAC,SAAS,EAAC,0BAA0B;sDAAC,QAAQ,EAAE,KAAK;;;;;;sDAC3D,kTAAC,GAAG;4CAAC,SAAS,EAAC,UAAU;;8DACrB,kTAAC,qTAAI;oDAAC,SAAS,EAAC,iFAAiF;;;;;;8DACjG,kTAAC,KAAK;oDACF,IAAI,EAAC,UAAU;oDACf,KAAK,CAAC,CAAC5B,QAAQ,CAAC;oDAChB,QAAQ,CAAC,EAAEQ,GAAC,GAAKP,WAAW,CAACO,GAAC,CAACmB,MAAM,CAACC,KAAK,CAAC,CAAC;oDAC7C,WAAW,EAAC,UAAU;oDACtB,SAAS,EAAC,8LAA8L;oDACxM,QAAQ;;;;;;;;;;;;;;;;;;8CAKpB,kTAAC,MAAM;oCACH,IAAI,EAAC,QAAQ;oCACb,QAAQ,CAAC,CAAC1B,OAAO,CAAC;oCAClB,SAAS,EAAC,iMAAiM;8CAE1MA,OAAO,iBAAG,kTAAC,uUAAO;wCAAC,SAAS,EAAC,sBAAsB,GAAG;;;;;+CAAG,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/F;;;QArGmBZ,uQAAS,CAAC,CAAC;;;KALNO,SAASA,CAAA,EAAG","ignoreList":[]}}]
}