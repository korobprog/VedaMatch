{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Rag-agent/admin/src/lib/api.ts"],"sourcesContent":["import axios from 'axios';\n\n// Функция для определения baseURL\nconst getBaseURL = (): string => {\n    // Если переменная окружения установлена, используем её\n    if (process.env.NEXT_PUBLIC_API_URL) {\n        return process.env.NEXT_PUBLIC_API_URL;\n    }\n\n    // Если мы в браузере, определяем URL на основе текущего домена\n    if (typeof window !== 'undefined') {\n        const hostname = window.location.hostname;\n        // Если это продакшн домен, используем API домен\n        if (hostname === 'vedamatch.ru' || hostname === 'www.vedamatch.ru') {\n            return 'https://api.vedamatch.ru/api';\n        }\n        // Для локальной разработки\n        if (hostname === 'localhost' || hostname === '127.0.0.1') {\n            return 'http://localhost:8081/api';\n        }\n        // Для других случаев (например, staging) можно использовать тот же домен\n        return `https://api.${hostname}/api`;\n    }\n\n    // Fallback для SSR\n    return 'http://localhost:8081/api';\n};\n\nconst api = axios.create({\n    baseURL: getBaseURL(),\n});\n\n// Add a request interceptor to add the auth headers if needed\napi.interceptors.request.use((config) => {\n    if (typeof window !== 'undefined') {\n        const adminData = localStorage.getItem('admin_data');\n        if (adminData) {\n            const parsed = JSON.parse(adminData);\n            // GORM returns ID with capital letters, so check both\n            const adminId = parsed.ID || parsed.id;\n            if (adminId) {\n                config.headers['X-Admin-ID'] = adminId;\n            }\n            if (parsed.token) {\n                config.headers['Authorization'] = `Bearer ${parsed.token}`;\n            }\n        }\n    }\n    return config;\n});\n\nexport default api;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,kCAAkC;AAClC,MAAM,aAAa;IACf,uDAAuD;IACvD,wCAAqC;QACjC;IACJ;;;AAmBJ;AAEA,MAAM,MAAM,4MAAK,CAAC,MAAM,CAAC;IACrB,SAAS;AACb;AAEA,8DAA8D;AAC9D,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC1B;;IAcA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Rag-agent/admin/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { Lock, Mail, Loader2, ShieldCheck } from 'lucide-react';\nimport api from '@/lib/api';\n\nexport default function LoginPage() {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const router = useRouter();\n\n    const handleLogin = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n\n        try {\n            const response = await api.post('/login', { email, password });\n            const { user, token } = response.data;\n\n            if (user.role === 'admin' || user.role === 'superadmin') {\n                localStorage.setItem('admin_data', JSON.stringify({ ...user, token }));\n                router.push('/dashboard');\n            } else {\n                setError('Access denied. Admin privileges required.');\n            }\n        } catch (err: any) {\n            setError(err.response?.data?.error || 'Login failed. Please check your credentials.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen flex items-center justify-center bg-[var(--background)] p-4\">\n            <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n                <div className=\"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-[var(--primary)]/10 rounded-full blur-[120px]\" />\n                <div className=\"absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] bg-[var(--primary)]/10 rounded-full blur-[120px]\" />\n            </div>\n\n            <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"w-full max-w-md\"\n            >\n                <div className=\"bg-[var(--card)] p-8 rounded-2xl border border-[var(--border)] shadow-2xl relative overflow-hidden\">\n                    <div className=\"flex justify-center mb-8\">\n                        <div className=\"p-4 bg-[var(--primary)]/10 rounded-2xl\">\n                            <ShieldCheck className=\"w-12 h-12 text-[var(--primary)]\" />\n                        </div>\n                    </div>\n\n                    <div className=\"text-center mb-8\">\n                        <h1 className=\"text-3xl font-bold tracking-tight mb-2\">Admin Portal</h1>\n                        <p className=\"text-[var(--muted-foreground)]\">Enter your credentials to manage the system</p>\n                    </div>\n\n                    {error && (\n                        <motion.div\n                            initial={{ opacity: 0, height: 0 }}\n                            animate={{ opacity: 1, height: 'auto' }}\n                            className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm\"\n                        >\n                            {error}\n                        </motion.div>\n                    )}\n\n                    <form onSubmit={handleLogin} className=\"space-y-6\">\n                        <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium ml-1\">Email Address</label>\n                            <div className=\"relative\">\n                                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--muted-foreground)]\" />\n                                <input\n                                    type=\"email\"\n                                    value={email}\n                                    onChange={(e) => setEmail(e.target.value)}\n                                    placeholder=\"admin@example.com\"\n                                    className=\"w-full bg-[var(--background)] border border-[var(--border)] rounded-xl py-3 pl-11 pr-4 focus:ring-2 focus:ring-[var(--primary)]/20 focus:border-[var(--primary)] transition-all outline-none\"\n                                    required\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium ml-1\">Password</label>\n                            <div className=\"relative\">\n                                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--muted-foreground)]\" />\n                                <input\n                                    type=\"password\"\n                                    value={password}\n                                    onChange={(e) => setPassword(e.target.value)}\n                                    placeholder=\"••••••••\"\n                                    className=\"w-full bg-[var(--background)] border border-[var(--border)] rounded-xl py-3 pl-11 pr-4 focus:ring-2 focus:ring-[var(--primary)]/20 focus:border-[var(--primary)] transition-all outline-none\"\n                                    required\n                                />\n                            </div>\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-[var(--primary)] hover:bg-[var(--primary)]/90 text-[var(--primary-foreground)] font-semibold py-3 rounded-xl transition-all h-12 flex items-center justify-center disabled:opacity-50\"\n                        >\n                            {loading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : 'Sign In'}\n                        </button>\n                    </form>\n                </div>\n            </motion.div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AANA;;;;;;;AAQe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sUAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sUAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sUAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sUAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,oQAAS;IAExB,MAAM,cAAc,OAAO;QACvB,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,IAAI;YACA,MAAM,WAAW,MAAM,qIAAG,CAAC,IAAI,CAAC,UAAU;gBAAE;gBAAO;YAAS;YAC5D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,SAAS,IAAI;YAErC,IAAI,KAAK,IAAI,KAAK,WAAW,KAAK,IAAI,KAAK,cAAc;gBACrD,aAAa,OAAO,CAAC,cAAc,KAAK,SAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE;gBAAM;gBACnE,OAAO,IAAI,CAAC;YAChB,OAAO;gBACH,SAAS;YACb;QACJ,EAAE,OAAO,KAAU;YACf,SAAS,IAAI,QAAQ,EAAE,MAAM,SAAS;QAC1C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,mWAAC;QAAI,WAAU;;0BACX,mWAAC;gBAAI,WAAU;;kCACX,mWAAC;wBAAI,WAAU;;;;;;kCACf,mWAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGnB,mWAAC,mTAAM,CAAC,GAAG;gBACP,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,WAAU;0BAEV,cAAA,mWAAC;oBAAI,WAAU;;sCACX,mWAAC;4BAAI,WAAU;sCACX,cAAA,mWAAC;gCAAI,WAAU;0CACX,cAAA,mWAAC,2UAAW;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAI/B,mWAAC;4BAAI,WAAU;;8CACX,mWAAC;oCAAG,WAAU;8CAAyC;;;;;;8CACvD,mWAAC;oCAAE,WAAU;8CAAiC;;;;;;;;;;;;wBAGjD,uBACG,mWAAC,mTAAM,CAAC,GAAG;4BACP,SAAS;gCAAE,SAAS;gCAAG,QAAQ;4BAAE;4BACjC,SAAS;gCAAE,SAAS;gCAAG,QAAQ;4BAAO;4BACtC,WAAU;sCAET;;;;;;sCAIT,mWAAC;4BAAK,UAAU;4BAAa,WAAU;;8CACnC,mWAAC;oCAAI,WAAU;;sDACX,mWAAC;4CAAM,WAAU;sDAA2B;;;;;;sDAC5C,mWAAC;4CAAI,WAAU;;8DACX,mWAAC,kTAAI;oDAAC,WAAU;;;;;;8DAChB,mWAAC;oDACG,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oDACxC,aAAY;oDACZ,WAAU;oDACV,QAAQ;;;;;;;;;;;;;;;;;;8CAKpB,mWAAC;oCAAI,WAAU;;sDACX,mWAAC;4CAAM,WAAU;sDAA2B;;;;;;sDAC5C,mWAAC;4CAAI,WAAU;;8DACX,mWAAC,kTAAI;oDAAC,WAAU;;;;;;8DAChB,mWAAC;oDACG,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC3C,aAAY;oDACZ,WAAU;oDACV,QAAQ;;;;;;;;;;;;;;;;;;8CAKpB,mWAAC;oCACG,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,wBAAU,mWAAC,oUAAO;wCAAC,WAAU;;;;;+CAA4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtF"}}]
}