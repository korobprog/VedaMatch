(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84619,e=>{"use strict";let t=(0,e.i(9147).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",0,t],84619)},84144,e=>{"use strict";let t=(0,e.i(9147).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",0,t],84144)},11290,e=>{"use strict";let t=(0,e.i(9147).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",0,t],11290)},40316,e=>{"use strict";let t=(0,e.i(9147).default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",0,t],40316)},63738,e=>{"use strict";let t=(0,e.i(9147).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",0,t],63738)},22634,(e,t,a)=>{"use strict";var r=e.r(50747),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useState,n=r.useEffect,i=r.useLayoutEffect,d=r.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!s(e,a)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),r=l({inst:{value:a,getSnapshot:t}}),s=r[0].inst,c=r[1];return i(function(){s.value=a,s.getSnapshot=t,o(s)&&c({inst:s})},[e,a,t]),n(function(){return o(s)&&c({inst:s}),e(function(){o(s)&&c({inst:s})})},[e]),d(a),a};a.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},40290,(e,t,a)=>{"use strict";t.exports=e.r(22634)},93615,e=>{"use strict";let t;var a=e.i(50747),r=e.i(40290);e.s(["ERROR_REVALIDATE_EVENT",0,3,"FOCUS_EVENT",0,0,"MUTATE_EVENT",0,2,"RECONNECT_EVENT",0,1],70598);var s=Object.prototype.hasOwnProperty;let l=new WeakMap,n=()=>{},i=n(),d=Object,o=e=>e===i,c=(e,t)=>({...e,...t}),u={},m={},x="undefined",f=typeof window!=x,h=typeof document!=x,p=f&&"Deno"in window,b=(e,t)=>{let a=l.get(e);return[()=>!o(t)&&e.get(t)||u,r=>{if(!o(t)){let s=e.get(t);t in m||(m[t]=s),a[5](t,c(s,r),s||u)}},a[6],()=>!o(t)&&t in m?m[t]:!o(t)&&e.get(t)||u]},y=!0,[g,v]=f&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[n,n],j={initFocus:e=>(h&&document.addEventListener("visibilitychange",e),g("focus",e),()=>{h&&document.removeEventListener("visibilitychange",e),v("focus",e)}),initReconnect:e=>{let t=()=>{y=!0,e()},a=()=>{y=!1};return g("online",t),g("offline",a),()=>{v("online",t),v("offline",a)}}},w=!a.default.useId,N=!f||p,k=N?a.useEffect:a.useLayoutEffect,E="undefined"!=typeof navigator&&navigator.connection,R=!N&&E&&(["slow-2g","2g"].includes(E.effectiveType)||E.saveData),S=new WeakMap,T=(e,t)=>e===`[object ${t}]`,_=0,O=e=>{let t,a,r=typeof e,s=d.prototype.toString.call(e),l=T(s,"Date"),n=T(s,"RegExp"),i=T(s,"Object");if(d(e)!==e||l||n)t=l?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):""+e;else{if(t=S.get(e))return t;if(t=++_+"~",S.set(e,t),Array.isArray(e)){for(a=0,t="@";a<e.length;a++)t+=O(e[a])+",";S.set(e,t)}if(i){t="#";let r=d.keys(e).sort();for(;!o(a=r.pop());)o(e[a])||(t+=a+":"+O(e[a])+",");S.set(e,t)}}return t},C=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?O(e):"",t]},L=0,A=()=>++L;async function D(...e){let[t,a,r,s]=e,n=c({populateCache:!0,throwOnError:!0},"boolean"==typeof s?{revalidate:s}:s||{}),d=n.populateCache,u=n.rollbackOnError,m=n.optimisticData,x=n.throwOnError;if("function"==typeof a){let e=[];for(let r of t.keys())!/^\$(inf|sub)\$/.test(r)&&a(t.get(r)._k)&&e.push(r);return Promise.all(e.map(f))}return f(a);async function f(a){let s,[c]=C(a);if(!c)return;let[f,h]=b(t,c),[p,y,g,v]=l.get(t),j=()=>{let e=p[c];return("function"==typeof n.revalidate?n.revalidate(f().data,a):!1!==n.revalidate)&&(delete g[c],delete v[c],e&&e[0])?e[0](2).then(()=>f().data):f().data};if(e.length<3)return j();let w=r,N=!1,k=A();y[c]=[k,0];let E=!o(m),R=f(),S=R.data,T=R._c,_=o(T)?S:T;if(E&&h({data:m="function"==typeof m?m(_,S):m,_c:_}),"function"==typeof w)try{w=w(_)}catch(e){s=e,N=!0}if(w&&"function"==typeof w.then){let e;if(w=await w.catch(e=>{s=e,N=!0}),k!==y[c][0]){if(N)throw s;return w}N&&E&&(e=s,"function"==typeof u?u(e):!1!==u)&&(d=!0,h({data:_,_c:i}))}if(d&&!N&&("function"==typeof d?h({data:d(w,_),error:i,_c:i}):h({data:w,error:i,_c:i})),y[c][1]=A(),Promise.resolve(j()).then(()=>{h({_c:i})}),N){if(x)throw s;return}return w}}let V=(e,t)=>{for(let a in e)e[a][0]&&e[a][0](t)},M=(e,t)=>{if(!l.has(e)){let a=c(j,t),r=Object.create(null),s=D.bind(i,e),d=n,o=Object.create(null),u=(e,t)=>{let a=o[e]||[];return o[e]=a,a.push(t),()=>a.splice(a.indexOf(t),1)},m=(t,a,r)=>{e.set(t,a);let s=o[t];if(s)for(let e of s)e(a,r)},x=()=>{if(!l.has(e)&&(l.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,m,u]),!N)){let t=a.initFocus(setTimeout.bind(i,V.bind(i,r,0))),s=a.initReconnect(setTimeout.bind(i,V.bind(i,r,1)));d=()=>{t&&t(),s&&s(),l.delete(e)}}};return x(),[e,s,x,d]}return[e,l.get(e)[4]]},[I,$]=M(new Map),F=c({onLoadingSlow:n,onSuccess:n,onError:n,onErrorRetry:(e,t,a,r,s)=>{let l=a.errorRetryCount,n=s.retryCount,i=~~((Math.random()+.5)*(1<<(n<8?n:8)))*a.errorRetryInterval;(o(l)||!(n>l))&&setTimeout(r,i,s)},onDiscarded:n,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:R?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:R?5e3:3e3,compare:function e(t,a){var r,l;if(t===a)return!0;if(t&&a&&(r=t.constructor)===a.constructor){if(r===Date)return t.getTime()===a.getTime();if(r===RegExp)return t.toString()===a.toString();if(r===Array){if((l=t.length)===a.length)for(;l--&&e(t[l],a[l]););return -1===l}if(!r||"object"==typeof t){for(r in l=0,t)if(s.call(t,r)&&++l&&!s.call(a,r)||!(r in a)||!e(t[r],a[r]))return!1;return Object.keys(a).length===l}}return t!=t&&a!=a},isPaused:()=>!1,cache:I,mutate:$,fallback:{}},{isOnline:()=>y,isVisible:()=>{let e=h&&document.visibilityState;return o(e)||"hidden"!==e}}),P=(e,t)=>{let a=c(e,t);if(t){let{use:r,fallback:s}=e,{use:l,fallback:n}=t;r&&l&&(a.use=r.concat(l)),s&&n&&(a.fallback=c(s,n))}return a},z=(0,a.createContext)({});var W=e.i(70598);let q=f&&window.__SWR_DEVTOOLS_USE__,U=(q?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,a,r)=>{let s=a&&((...e)=>{let[r]=C(t),[,,,s]=l.get(I);if(r.startsWith("$inf$"))return a(...e);let n=s[r];return o(n)?a(...e):(delete s[r],n)});return e(t,s,r)});q&&(window.__SWR_DEVTOOLS_REACT__=a.default);let G=()=>{},H=G(),B=(new WeakMap,a.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}})),J={dedupe:!0},K=Promise.resolve(i);d.defineProperty(e=>{let{value:t}=e,r=(0,a.useContext)(z),s="function"==typeof t,l=(0,a.useMemo)(()=>s?t(r):t,[s,r,t]),n=(0,a.useMemo)(()=>s?l:P(r,l),[s,r,l]),d=l&&l.provider,o=(0,a.useRef)(i);d&&!o.current&&(o.current=M(d(n.cache||I),l));let u=o.current;return u&&(n.cache=u[0],n.mutate=u[1]),k(()=>{if(u)return u[2]&&u[2](),u[3]},[]),(0,a.createElement)(z.Provider,c(e,{value:n}))},"defaultValue",{value:F});let X=(t=(e,t,s)=>{let{cache:d,compare:u,suspense:m,fallbackData:h,revalidateOnMount:p,revalidateIfStale:y,refreshInterval:g,refreshWhenHidden:v,refreshWhenOffline:j,keepPreviousData:E,strictServerPrefetchWarning:R}=s,[S,T,_,O]=l.get(d),[L,V]=C(e),M=(0,a.useRef)(!1),I=(0,a.useRef)(!1),$=(0,a.useRef)(L),F=(0,a.useRef)(t),P=(0,a.useRef)(s),z=()=>P.current.isVisible()&&P.current.isOnline(),[q,U,G,H]=b(d,L),X=(0,a.useRef)({}).current,Y=o(h)?o(s.fallback)?i:s.fallback[L]:h,Q=(e,t)=>{for(let a in X)if("data"===a){if(!u(e[a],t[a])&&(!o(e[a])||!u(ei,t[a])))return!1}else if(t[a]!==e[a])return!1;return!0},Z=(0,a.useMemo)(()=>{let e=!!L&&!!t&&(o(p)?!P.current.isPaused()&&!m&&!1!==y:p),a=t=>{let a=c(t);return(delete a._k,e)?{isValidating:!0,isLoading:!0,...a}:a},r=q(),s=H(),l=a(r),n=r===s?l:a(s),i=l;return[()=>{let e=a(q());return Q(e,i)?(i.data=e.data,i.isLoading=e.isLoading,i.isValidating=e.isValidating,i.error=e.error,i):(i=e,e)},()=>n]},[d,L]),ee=(0,r.useSyncExternalStore)((0,a.useCallback)(e=>G(L,(t,a)=>{Q(a,t)||e()}),[d,L]),Z[0],Z[1]),et=!M.current,ea=S[L]&&S[L].length>0,er=ee.data,es=o(er)?Y&&"function"==typeof Y.then?B(Y):Y:er,el=ee.error,en=(0,a.useRef)(es),ei=E?o(er)?o(en.current)?es:en.current:er:es,ed=L&&o(es),eo=!N&&(0,r.useSyncExternalStore)(()=>n,()=>!1,()=>!0);R&&eo&&!m&&ed&&console.warn(`Missing pre-initiated data for serialized key "${L}" during server-side rendering. Data fethcing should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);let ec=(!ea||!!o(el))&&(et&&!o(p)?p:!P.current.isPaused()&&(m?!o(es)&&y:o(es)||y)),eu=!!(L&&t&&et&&ec),em=o(ee.isValidating)?eu:ee.isValidating,ex=o(ee.isLoading)?eu:ee.isLoading,ef=(0,a.useCallback)(async e=>{let t,a,r=F.current;if(!L||!r||I.current||P.current.isPaused())return!1;let l=!0,n=e||{},d=!_[L]||!n.dedupe,c=()=>w?!I.current&&L===$.current&&M.current:L===$.current,m={isValidating:!1,isLoading:!1},x=()=>{U(m)},f=()=>{let e=_[L];e&&e[1]===a&&delete _[L]},h={isValidating:!0};o(q().data)&&(h.isLoading=!0);try{if(d&&(U(h),s.loadingTimeout&&o(q().data)&&setTimeout(()=>{l&&c()&&P.current.onLoadingSlow(L,s)},s.loadingTimeout),_[L]=[r(V),A()]),[t,a]=_[L],t=await t,d&&setTimeout(f,s.dedupingInterval),!_[L]||_[L][1]!==a)return d&&c()&&P.current.onDiscarded(L),!1;m.error=i;let e=T[L];if(!o(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return x(),d&&c()&&P.current.onDiscarded(L),!1;let n=q().data;m.data=u(n,t)?n:t,d&&c()&&P.current.onSuccess(t,L,s)}catch(a){f();let e=P.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(m.error=a,d&&c())&&(e.onError(a,L,e),(!0===t||"function"==typeof t&&t(a))&&(!P.current.revalidateOnFocus||!P.current.revalidateOnReconnect||z())&&e.onErrorRetry(a,L,e,e=>{let t=S[L];t&&t[0]&&t[0](W.ERROR_REVALIDATE_EVENT,e)},{retryCount:(n.retryCount||0)+1,dedupe:!0}))}return l=!1,x(),!0},[L,d]),eh=(0,a.useCallback)((...e)=>D(d,$.current,...e),[]);if(k(()=>{F.current=t,P.current=s,o(er)||(en.current=er)}),k(()=>{var e;let t;if(!L)return;let a=ef.bind(i,J),r=0;P.current.revalidateOnFocus&&(r=Date.now()+P.current.focusThrottleInterval);let s=(e=(e,t={})=>{if(e==W.FOCUS_EVENT){let e=Date.now();P.current.revalidateOnFocus&&e>r&&z()&&(r=e+P.current.focusThrottleInterval,a())}else if(e==W.RECONNECT_EVENT)P.current.revalidateOnReconnect&&z()&&a();else if(e==W.MUTATE_EVENT)return ef();else if(e==W.ERROR_REVALIDATE_EVENT)return ef(t)},(t=S[L]||(S[L]=[])).push(e),()=>{let a=t.indexOf(e);a>=0&&(t[a]=t[t.length-1],t.pop())});if(I.current=!1,$.current=L,M.current=!0,U({_k:V}),ec&&!_[L])if(o(es)||N)a();else f&&typeof window.requestAnimationFrame!=x?window.requestAnimationFrame(a):setTimeout(a,1);return()=>{I.current=!0,s()}},[L]),k(()=>{let e;function t(){let t="function"==typeof g?g(q().data):g;t&&-1!==e&&(e=setTimeout(a,t))}function a(){!q().error&&(v||P.current.isVisible())&&(j||P.current.isOnline())?ef(J).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[g,v,j,L]),(0,a.useDebugValue)(ei),m){if(!w&&N&&ed)throw Error("Fallback data is required when using Suspense in SSR.");ed&&(F.current=t,P.current=s,I.current=!1);let e=O[L];if(B(!o(e)&&ed?eh(e):K),!o(el)&&ed)throw el;let a=ed?ef(J):K;!o(ei)&&ed&&(a.status="fulfilled",a.value=!0),B(a)}return{mutate:eh,get data(){return X.data=!0,ei},get error(){return X.error=!0,el},get isValidating(){return X.isValidating=!0,em},get isLoading(){return X.isLoading=!0,ex}}},function(...e){let r,s=(r=(0,a.useContext)(z),(0,a.useMemo)(()=>c(F,r),[r])),[l,n,i]="function"==typeof e[1]?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],d=P(s,i),o=t,{use:u}=d,m=(u||[]).concat(U);for(let e=m.length;e--;)o=m[e](o);return o(l,n||d.fetcher||null,d)});e.s(["default",0,X],93615)},25391,e=>{"use strict";let t=(0,e.i(9147).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",0,t],25391)},4271,e=>{"use strict";var t=e.i(75398),a=e.i(50747),r=e.i(93615),s=e.i(18041),l=e.i(9311),n=e.i(97232),i=e.i(9147);let d=(0,i.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),o=(0,i.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var c=e.i(84144);let u=(0,i.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),m=(0,i.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),x=(0,i.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),f=(0,i.default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),h=(0,i.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var p=e.i(63738),b=e.i(25391),y=e.i(11290);let g=(0,i.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var v=e.i(84619);let j=(0,i.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var w=e.i(88005),N=e.i(39136);let k=(0,i.default)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var E=e.i(40316),R=e.i(99392);let S=e=>R.default.get(e).then(e=>e.data),T={text:m,image:x,audio:f,video:h},_={text:"Текст",image:"Картинки",audio:"Аудио",video:"Видео"};e.s(["default",0,function(){let[e,i]=(0,a.useState)(""),[x,f]=(0,a.useState)(""),[h,O]=(0,a.useState)(!1),[C,L]=(0,a.useState)(!1),[A,D]=(0,a.useState)(!1),[V,M]=(0,a.useState)(null),[I,$]=(0,a.useState)(!1),{data:F,error:P,mutate:z}=(0,r.default)(`/admin/ai-models?search=${e}&category=${x}`,S),W=async()=>{O(!0);try{await R.default.post("/admin/ai-models/sync"),z()}catch(e){console.error("Failed to sync models",e)}finally{O(!1)}},q=async()=>{L(!0);try{await R.default.post("/admin/ai-models/bulk-test"),z()}catch(e){console.error("Failed to bulk test models",e)}finally{L(!1)}},U=async()=>{if(confirm("Отключить все оффлайн модели?")){D(!0);try{let e=await R.default.post("/admin/ai-models/disable-offline");alert(`Отключено моделей: ${e.data.disabled}`),z()}catch(e){console.error("Failed to disable offline models",e)}finally{D(!1)}}},G=async(e,t)=>{try{await R.default.put(`/admin/ai-models/${e}`,{isEnabled:!t}),z()}catch(e){console.error("Failed to toggle model status",e)}},H=async(e,t)=>{try{await R.default.put(`/admin/ai-models/${e}`,{isRecommended:!t}),z()}catch(e){console.error("Failed to toggle recommendation status",e)}},B=async(e,t)=>{try{await R.default.put(`/admin/ai-models/${e}`,{isRagEnabled:!t}),z()}catch(e){console.error("Failed to toggle RAG status",e)}},J=async e=>{M(e);try{await R.default.post(`/admin/ai-models/${e}/test`),z()}catch(e){console.error("Failed to test model",e)}finally{M(null)}},K=async e=>{if(confirm("Вы уверены, что хотите удалить эту модель из списка?"))try{await R.default.delete(`/admin/ai-models/${e}`),z()}catch(e){console.error("Failed to delete model",e)}},X=async e=>{try{await R.default.put(`/admin/ai-models/${e}`,{isNew:!1}),z()}catch(e){console.error("Failed to update model",e)}},Y=F?.filter(e=>e.isRecommended)||[],Q=F?.filter(e=>"online"===e.lastTestStatus&&e.lastResponseTime>0&&e.lastResponseTime<3e3).sort((e,t)=>e.lastResponseTime-t.lastResponseTime).slice(0,5)||[];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Models"}),(0,t.jsx)("p",{className:"text-[var(--muted-foreground)] mt-1",children:"Управление доступными ИИ моделями и мониторинг"}),F&&F.length>0&&F[0].lastSyncDate&&(0,t.jsxs)("p",{className:"text-[10px] text-[var(--muted-foreground)] mt-1 font-mono",children:["Последняя синхронизация: ",new Date(F[0].lastSyncDate).toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)("button",{onClick:()=>$(!0),className:"flex items-center gap-2 bg-amber-500 text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-amber-500/20",children:[(0,t.jsx)(N.Sparkles,{className:"w-4 h-4"}),"Рекомендации"]}),(0,t.jsxs)("button",{onClick:U,disabled:A,className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-red-500/20 disabled:opacity-50",children:[A?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(g,{className:"w-4 h-4"}),"Откл. оффлайн"]}),(0,t.jsxs)("button",{onClick:q,disabled:C,className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50",children:[C?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(k,{className:"w-4 h-4"}),"Массовый тест"]}),(0,t.jsxs)("button",{onClick:W,disabled:h,className:"flex items-center gap-2 bg-[var(--primary)] text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-[var(--primary)]/20 disabled:opacity-50",children:[h?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(d,{className:"w-4 h-4"}),"Синхронизировать"]})]})]}),(0,t.jsx)(l.AnimatePresence,{children:I&&(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>$(!1),children:(0,t.jsxs)(s.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[var(--card)] rounded-3xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center",children:(0,t.jsx)(N.Sparkles,{className:"w-6 h-6 text-amber-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Рекомендации по моделям"}),(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)]",children:"Выберите лучшие модели для ваших пользователей"})]})]}),(0,t.jsx)("button",{onClick:()=>$(!1),className:"p-2 hover:bg-[var(--secondary)] rounded-xl transition-colors",children:(0,t.jsx)(w.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h3",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[(0,t.jsx)(u,{className:"w-4 h-4"}),"Самые быстрые модели"]}),Q.length>0?(0,t.jsx)("div",{className:"space-y-2",children:Q.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-900/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-lg font-bold text-emerald-600",children:["#",a+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)] font-mono",children:e.provider})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-bold text-emerald-600",children:[(e.lastResponseTime/1e3).toFixed(2),"s"]}),(0,t.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)]",children:_[e.category]})]})]},e.ID))}):(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] p-4 bg-[var(--secondary)] rounded-xl text-center",children:"Нет данных. Запустите массовый тест для получения рекомендаций."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-bold text-amber-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[(0,t.jsx)(j,{className:"w-4 h-4"}),"Отмеченные как рекомендуемые (",Y.length,")"]}),Y.length>0?(0,t.jsx)("div",{className:"space-y-2",children:Y.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(j,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)] font-mono",children:e.provider})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${e.isEnabled?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-500"}`,children:e.isEnabled?"Активна":"Выкл"}),(0,t.jsx)("button",{onClick:()=>H(e.ID,e.isRecommended),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg",title:"Убрать из рекомендуемых",children:(0,t.jsx)(w.X,{className:"w-4 h-4"})})]})]},e.ID))}):(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] p-4 bg-[var(--secondary)] rounded-xl text-center",children:"Нет рекомендуемых моделей. Отметьте модели звёздочкой в таблице."})]}),(0,t.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/20",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,t.jsx)("strong",{children:"Совет:"})," Рекомендуемые модели будут отображаться пользователям в первую очередь. Выбирайте модели с быстрым откликом и стабильной работой."]})})]})})}),(0,t.jsxs)("div",{className:"bg-[var(--card)] p-4 rounded-2xl border border-[var(--border)] shadow-sm flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--muted-foreground)]"}),(0,t.jsx)("input",{type:"text",placeholder:"Поиск по названию или ID...",value:e,onChange:e=>i(e.target.value),className:"w-full bg-[var(--secondary)] border-none rounded-xl py-2.5 pl-10 pr-4 text-sm focus:ring-2 focus:ring-[var(--primary)]/20 outline-none"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("select",{value:x,onChange:e=>f(e.target.value),className:"bg-[var(--secondary)] border-none rounded-xl py-2.5 px-4 text-sm outline-none cursor-pointer min-w-[150px]",children:[(0,t.jsx)("option",{value:"",children:"Все типы"}),(0,t.jsx)("option",{value:"text",children:"Текст"}),(0,t.jsx)("option",{value:"image",children:"Картинки"}),(0,t.jsx)("option",{value:"audio",children:"Аудио"}),(0,t.jsx)("option",{value:"video",children:"Видео"})]})})]}),P?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 bg-red-50 dark:bg-red-900/10 rounded-3xl border border-red-100 dark:border-red-900/20 text-red-500",children:[(0,t.jsx)(b.AlertCircle,{className:"w-12 h-12 mb-4"}),(0,t.jsx)("p",{className:"font-semibold",children:"Ошибка загрузки моделей"}),(0,t.jsx)("button",{onClick:()=>z(),className:"mt-4 text-sm underline",children:"Попробовать снова"})]}):F?(0,t.jsxs)("div",{className:"overflow-hidden bg-[var(--card)] border border-[var(--border)] rounded-3xl shadow-sm",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-[var(--border)] text-[var(--muted-foreground)] text-xs uppercase tracking-wider",children:[(0,t.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Модель"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Тип"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Статус"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Рек."}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold",children:"RAG"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Мониторинг"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold text-right",children:"Действия"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-[var(--border)]",children:(0,t.jsx)(l.AnimatePresence,{children:F.map(e=>{let a=T[e.category]||m;return(0,t.jsxs)(s.motion.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-[var(--secondary)]/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-[var(--secondary)] rounded-xl flex items-center justify-center text-[var(--primary)] border border-[var(--border)]",children:(0,t.jsx)(a,{className:"w-5 h-5"})}),e.isNew&&(0,t.jsx)("div",{onClick:t=>{t.stopPropagation(),X(e.ID)},className:"absolute -top-1 -right-1 bg-amber-500 text-white p-0.5 rounded-full border-2 border-[var(--card)] cursor-pointer hover:scale-110 transition-transform",title:"Новая модель! Нажмите, чтобы убрать пометку",children:(0,t.jsx)(u,{className:"w-2.5 h-2.5 fill-current"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sm",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)] font-mono uppercase",children:e.provider}),e.isNew&&(0,t.jsx)("span",{className:"text-[9px] text-amber-600 font-bold uppercase tracking-tighter bg-amber-50 px-1 rounded",children:"New"})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"text-xs font-medium px-2.5 py-1 bg-[var(--secondary)] rounded-full border border-[var(--border)]",children:_[e.category]||e.category})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>G(e.ID,e.isEnabled),className:`relative w-10 h-5 rounded-full transition-colors ${e.isEnabled?"bg-emerald-500":"bg-gray-300"}`,children:(0,t.jsx)("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${e.isEnabled?"right-1":"left-1"}`})}),(0,t.jsx)("span",{className:`text-xs font-semibold ${e.isEnabled?"text-emerald-500":"text-[var(--muted-foreground)]"}`,children:e.isEnabled?"Активна":"Выкл"})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("button",{onClick:()=>H(e.ID,e.isRecommended),className:`p-2 rounded-lg transition-all ${e.isRecommended?"text-amber-500 bg-amber-50":"text-gray-400 hover:bg-gray-50"}`,title:e.isRecommended?"Убрать из рекомендуемых":"Добавить в рекомендуемые",children:(0,t.jsx)(j,{className:`w-5 h-5 ${e.isRecommended?"fill-amber-500":""}`})})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("button",{onClick:()=>B(e.ID,e.isRagEnabled),className:`p-2 rounded-lg transition-all ${e.isRagEnabled?"text-blue-500 bg-blue-50":"text-gray-400 hover:bg-gray-50"}`,title:e.isRagEnabled?"Отключить RAG":"Включить RAG",children:(0,t.jsx)(E.Database,{className:`w-5 h-5 ${e.isRagEnabled?"fill-blue-500":""}`})})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["online"===e.lastTestStatus?(0,t.jsx)(y.CheckCircle2,{className:"w-3.5 h-3.5 text-emerald-500"}):"offline"===e.lastTestStatus?(0,t.jsx)(g,{className:"w-3.5 h-3.5 text-red-500"}):(0,t.jsx)(v.Activity,{className:"w-3.5 h-3.5 text-[var(--muted-foreground)]"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"online"===e.lastTestStatus?"Доступна":"offline"===e.lastTestStatus?"Оффлайн":"error"===e.lastTestStatus?"Ошибка":"Нет данных"})]}),e.lastResponseTime>0&&(0,t.jsxs)("p",{className:"text-[10px] text-[var(--muted-foreground)]",children:["Задержка: ",(0,t.jsxs)("span",{className:e.lastResponseTime<2e3?"text-emerald-500":"text-amber-500",children:[(e.lastResponseTime/1e3).toFixed(2),"s"]})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>J(e.ID),disabled:V===e.ID,className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-all",title:"Протестировать скорость",children:V===e.ID?(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(o,{className:"w-4 h-4 fill-current"})}),(0,t.jsx)("button",{onClick:()=>K(e.ID),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Удалить из списка",children:(0,t.jsx)(c.Trash2,{className:"w-4 h-4"})})]})})]},e.ID)})})})]})}),0===F.length&&(0,t.jsx)("div",{className:"p-12 text-center text-[var(--muted-foreground)]",children:"Модели не найдены. Попробуйте синхронизировать с API."})]}):(0,t.jsx)("div",{className:"flex items-center justify-center p-24",children:(0,t.jsx)(p.Loader2,{className:"w-8 h-8 animate-spin text-[var(--primary)]"})})]})}],4271)}]);