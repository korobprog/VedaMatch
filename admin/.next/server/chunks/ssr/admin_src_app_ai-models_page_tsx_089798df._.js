module.exports=[64255,a=>{"use strict";var b=a.i(4663),c=a.i(59820),d=a.i(31620),e=a.i(94931),f=a.i(58892),g=a.i(59408),h=a.i(66462);let i=(0,h.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),j=(0,h.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var k=a.i(39537);let l=(0,h.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),m=(0,h.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),n=(0,h.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),o=(0,h.default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),p=(0,h.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var q=a.i(46453),r=a.i(99235),s=a.i(21154);let t=(0,h.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var u=a.i(34572);let v=(0,h.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var w=a.i(92138),x=a.i(45618);let y=(0,h.default)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var z=a.i(20221),A=a.i(47249);let B=a=>A.default.get(a).then(a=>a.data),C={text:m,image:n,audio:o,video:p},D={text:"Текст",image:"Картинки",audio:"Аудио",video:"Видео"};a.s(["default",0,function(){let[a,h]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(!1),{data:N,error:O,mutate:P}=(0,d.default)(`/admin/ai-models?search=${a}&category=${n}`,B),Q=async()=>{E(!0);try{await A.default.post("/admin/ai-models/sync"),P()}catch(a){console.error("Failed to sync models",a)}finally{E(!1)}},R=async()=>{G(!0);try{await A.default.post("/admin/ai-models/bulk-test"),P()}catch(a){console.error("Failed to bulk test models",a)}finally{G(!1)}},S=async()=>{if(confirm("Отключить все оффлайн модели?")){I(!0);try{let a=await A.default.post("/admin/ai-models/disable-offline");alert(`Отключено моделей: ${a.data.disabled}`),P()}catch(a){console.error("Failed to disable offline models",a)}finally{I(!1)}}},T=async(a,b)=>{try{await A.default.put(`/admin/ai-models/${a}`,{isEnabled:!b}),P()}catch(a){console.error("Failed to toggle model status",a)}},U=async(a,b)=>{try{await A.default.put(`/admin/ai-models/${a}`,{isRecommended:!b}),P()}catch(a){console.error("Failed to toggle recommendation status",a)}},V=async(a,b)=>{try{await A.default.put(`/admin/ai-models/${a}`,{isRagEnabled:!b}),P()}catch(a){console.error("Failed to toggle RAG status",a)}},W=async a=>{K(a);try{await A.default.post(`/admin/ai-models/${a}/test`),P()}catch(a){console.error("Failed to test model",a)}finally{K(null)}},X=async a=>{if(confirm("Вы уверены, что хотите удалить эту модель из списка?"))try{await A.default.delete(`/admin/ai-models/${a}`),P()}catch(a){console.error("Failed to delete model",a)}},Y=async a=>{try{await A.default.put(`/admin/ai-models/${a}`,{isNew:!1}),P()}catch(a){console.error("Failed to update model",a)}},Z=N?.filter(a=>a.isRecommended)||[],$=N?.filter(a=>"online"===a.lastTestStatus&&a.lastResponseTime>0&&a.lastResponseTime<3e3).sort((a,b)=>a.lastResponseTime-b.lastResponseTime).slice(0,5)||[];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Models"}),(0,b.jsx)("p",{className:"text-[var(--muted-foreground)] mt-1",children:"Управление доступными ИИ моделями и мониторинг"}),N&&N.length>0&&N[0].lastSyncDate&&(0,b.jsxs)("p",{className:"text-[10px] text-[var(--muted-foreground)] mt-1 font-mono",children:["Последняя синхронизация: ",new Date(N[0].lastSyncDate).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)("button",{onClick:()=>M(!0),className:"flex items-center gap-2 bg-amber-500 text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-amber-500/20",children:[(0,b.jsx)(x.Sparkles,{className:"w-4 h-4"}),"Рекомендации"]}),(0,b.jsxs)("button",{onClick:S,disabled:H,className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-red-500/20 disabled:opacity-50",children:[H?(0,b.jsx)(q.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(t,{className:"w-4 h-4"}),"Откл. оффлайн"]}),(0,b.jsxs)("button",{onClick:R,disabled:F,className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50",children:[F?(0,b.jsx)(q.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(y,{className:"w-4 h-4"}),"Массовый тест"]}),(0,b.jsxs)("button",{onClick:Q,disabled:p,className:"flex items-center gap-2 bg-[var(--primary)] text-white px-4 py-2.5 rounded-xl font-bold hover:opacity-90 transition-all shadow-lg shadow-[var(--primary)]/20 disabled:opacity-50",children:[p?(0,b.jsx)(q.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(i,{className:"w-4 h-4"}),"Синхронизировать"]})]})]}),(0,b.jsx)(f.AnimatePresence,{children:L&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>M(!1),children:(0,b.jsxs)(e.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[var(--card)] rounded-3xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center",children:(0,b.jsx)(x.Sparkles,{className:"w-6 h-6 text-amber-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Рекомендации по моделям"}),(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)]",children:"Выберите лучшие модели для ваших пользователей"})]})]}),(0,b.jsx)("button",{onClick:()=>M(!1),className:"p-2 hover:bg-[var(--secondary)] rounded-xl transition-colors",children:(0,b.jsx)(w.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-emerald-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[(0,b.jsx)(l,{className:"w-4 h-4"}),"Самые быстрые модели"]}),$.length>0?(0,b.jsx)("div",{className:"space-y-2",children:$.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-900/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-emerald-600",children:["#",c+1]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)] font-mono",children:a.provider})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-bold text-emerald-600",children:[(a.lastResponseTime/1e3).toFixed(2),"s"]}),(0,b.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)]",children:D[a.category]})]})]},a.ID))}):(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] p-4 bg-[var(--secondary)] rounded-xl text-center",children:"Нет данных. Запустите массовый тест для получения рекомендаций."})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-amber-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[(0,b.jsx)(v,{className:"w-4 h-4"}),"Отмеченные как рекомендуемые (",Z.length,")"]}),Z.length>0?(0,b.jsx)("div",{className:"space-y-2",children:Z.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(v,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)] font-mono",children:a.provider})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${a.isEnabled?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-500"}`,children:a.isEnabled?"Активна":"Выкл"}),(0,b.jsx)("button",{onClick:()=>U(a.ID,a.isRecommended),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg",title:"Убрать из рекомендуемых",children:(0,b.jsx)(w.X,{className:"w-4 h-4"})})]})]},a.ID))}):(0,b.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] p-4 bg-[var(--secondary)] rounded-xl text-center",children:"Нет рекомендуемых моделей. Отметьте модели звёздочкой в таблице."})]}),(0,b.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/20",children:(0,b.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,b.jsx)("strong",{children:"Совет:"})," Рекомендуемые модели будут отображаться пользователям в первую очередь. Выбирайте модели с быстрым откликом и стабильной работой."]})})]})})}),(0,b.jsxs)("div",{className:"bg-[var(--card)] p-4 rounded-2xl border border-[var(--border)] shadow-sm flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--muted-foreground)]"}),(0,b.jsx)("input",{type:"text",placeholder:"Поиск по названию или ID...",value:a,onChange:a=>h(a.target.value),className:"w-full bg-[var(--secondary)] border-none rounded-xl py-2.5 pl-10 pr-4 text-sm focus:ring-2 focus:ring-[var(--primary)]/20 outline-none"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("select",{value:n,onChange:a=>o(a.target.value),className:"bg-[var(--secondary)] border-none rounded-xl py-2.5 px-4 text-sm outline-none cursor-pointer min-w-[150px]",children:[(0,b.jsx)("option",{value:"",children:"Все типы"}),(0,b.jsx)("option",{value:"text",children:"Текст"}),(0,b.jsx)("option",{value:"image",children:"Картинки"}),(0,b.jsx)("option",{value:"audio",children:"Аудио"}),(0,b.jsx)("option",{value:"video",children:"Видео"})]})})]}),O?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 bg-red-50 dark:bg-red-900/10 rounded-3xl border border-red-100 dark:border-red-900/20 text-red-500",children:[(0,b.jsx)(r.AlertCircle,{className:"w-12 h-12 mb-4"}),(0,b.jsx)("p",{className:"font-semibold",children:"Ошибка загрузки моделей"}),(0,b.jsx)("button",{onClick:()=>P(),className:"mt-4 text-sm underline",children:"Попробовать снова"})]}):N?(0,b.jsxs)("div",{className:"overflow-hidden bg-[var(--card)] border border-[var(--border)] rounded-3xl shadow-sm",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-[var(--border)] text-[var(--muted-foreground)] text-xs uppercase tracking-wider",children:[(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Модель"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Тип"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Статус"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Рек."}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"RAG"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Мониторинг"}),(0,b.jsx)("th",{className:"px-6 py-4 font-semibold text-right",children:"Действия"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-[var(--border)]",children:(0,b.jsx)(f.AnimatePresence,{children:N.map(a=>{let c=C[a.category]||m;return(0,b.jsxs)(e.motion.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-[var(--secondary)]/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-[var(--secondary)] rounded-xl flex items-center justify-center text-[var(--primary)] border border-[var(--border)]",children:(0,b.jsx)(c,{className:"w-5 h-5"})}),a.isNew&&(0,b.jsx)("div",{onClick:b=>{b.stopPropagation(),Y(a.ID)},className:"absolute -top-1 -right-1 bg-amber-500 text-white p-0.5 rounded-full border-2 border-[var(--card)] cursor-pointer hover:scale-110 transition-transform",title:"Новая модель! Нажмите, чтобы убрать пометку",children:(0,b.jsx)(l,{className:"w-2.5 h-2.5 fill-current"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-sm",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] text-[var(--muted-foreground)] font-mono uppercase",children:a.provider}),a.isNew&&(0,b.jsx)("span",{className:"text-[9px] text-amber-600 font-bold uppercase tracking-tighter bg-amber-50 px-1 rounded",children:"New"})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"text-xs font-medium px-2.5 py-1 bg-[var(--secondary)] rounded-full border border-[var(--border)]",children:D[a.category]||a.category})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>T(a.ID,a.isEnabled),className:`relative w-10 h-5 rounded-full transition-colors ${a.isEnabled?"bg-emerald-500":"bg-gray-300"}`,children:(0,b.jsx)("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${a.isEnabled?"right-1":"left-1"}`})}),(0,b.jsx)("span",{className:`text-xs font-semibold ${a.isEnabled?"text-emerald-500":"text-[var(--muted-foreground)]"}`,children:a.isEnabled?"Активна":"Выкл"})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("button",{onClick:()=>U(a.ID,a.isRecommended),className:`p-2 rounded-lg transition-all ${a.isRecommended?"text-amber-500 bg-amber-50":"text-gray-400 hover:bg-gray-50"}`,title:a.isRecommended?"Убрать из рекомендуемых":"Добавить в рекомендуемые",children:(0,b.jsx)(v,{className:`w-5 h-5 ${a.isRecommended?"fill-amber-500":""}`})})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("button",{onClick:()=>V(a.ID,a.isRagEnabled),className:`p-2 rounded-lg transition-all ${a.isRagEnabled?"text-blue-500 bg-blue-50":"text-gray-400 hover:bg-gray-50"}`,title:a.isRagEnabled?"Отключить RAG":"Включить RAG",children:(0,b.jsx)(z.Database,{className:`w-5 h-5 ${a.isRagEnabled?"fill-blue-500":""}`})})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["online"===a.lastTestStatus?(0,b.jsx)(s.CheckCircle2,{className:"w-3.5 h-3.5 text-emerald-500"}):"offline"===a.lastTestStatus?(0,b.jsx)(t,{className:"w-3.5 h-3.5 text-red-500"}):(0,b.jsx)(u.Activity,{className:"w-3.5 h-3.5 text-[var(--muted-foreground)]"}),(0,b.jsx)("span",{className:"text-xs font-medium",children:"online"===a.lastTestStatus?"Доступна":"offline"===a.lastTestStatus?"Оффлайн":"error"===a.lastTestStatus?"Ошибка":"Нет данных"})]}),a.lastResponseTime>0&&(0,b.jsxs)("p",{className:"text-[10px] text-[var(--muted-foreground)]",children:["Задержка: ",(0,b.jsxs)("span",{className:a.lastResponseTime<2e3?"text-emerald-500":"text-amber-500",children:[(a.lastResponseTime/1e3).toFixed(2),"s"]})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>W(a.ID),disabled:J===a.ID,className:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-all",title:"Протестировать скорость",children:J===a.ID?(0,b.jsx)(q.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(j,{className:"w-4 h-4 fill-current"})}),(0,b.jsx)("button",{onClick:()=>X(a.ID),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Удалить из списка",children:(0,b.jsx)(k.Trash2,{className:"w-4 h-4"})})]})})]},a.ID)})})})]})}),0===N.length&&(0,b.jsx)("div",{className:"p-12 text-center text-[var(--muted-foreground)]",children:"Модели не найдены. Попробуйте синхронизировать с API."})]}):(0,b.jsx)("div",{className:"flex items-center justify-center p-24",children:(0,b.jsx)(q.Loader2,{className:"w-8 h-8 animate-spin text-[var(--primary)]"})})]})}],64255)}];

//# sourceMappingURL=admin_src_app_ai-models_page_tsx_089798df._.js.map